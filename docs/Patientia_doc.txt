================================================================================
                           PATIENTIA - DOCUMENTACIÃ“N TÃ‰CNICA
              Generador de Historias ClÃ­nicas SintÃ©ticas Mediante Agentes IA
================================================================================

ğŸ“‹ INFORMACIÃ“N GENERAL DEL PROYECTO
================================================================================

NOMBRE: Patientia R35 - Generador de Historias ClÃ­nicas SintÃ©ticas
TIPO: Trabajo Fin de MÃ¡ster (TFM) en colaboraciÃ³n con Sopra Steria
FECHA: 2024-2025
ESTADO: Sistema completamente funcional (Julio 2025)


DESCRIPCIÃ“N:
Patientia es un sistema avanzado basado en agentes de IA que genera datos 
sintÃ©ticos mÃ©dicos de alta calidad manteniendo las caracterÃ­sticas estadÃ­sticas 
y clÃ­nicas de los datos reales sin comprometer la privacidad de los pacientes.

El sistema utiliza un enfoque multi-agente con LangGraph para orquestar el 
anÃ¡lisis, generaciÃ³n, validaciÃ³n, simulaciÃ³n y evaluaciÃ³n de datos clÃ­nicos 
sintÃ©ticos.

ğŸ“Š ARQUITECTURA Y COMPONENTES PRINCIPALES
================================================================================

ğŸ”§ STACK TECNOLÃ“GICO:
- Python 3.11+
- LangGraph: OrquestaciÃ³n de agentes con estados
- Streamlit: Interfaz web interactiva
- Groq/Ollama/Azure OpenAI: Proveedores LLM
- SDV/CTGAN/TVAE: Modelos generativos sintÃ©ticos
- Pandas/NumPy: Procesamiento de datos mÃ©dicos
- MedLlama2: LLM especializado en medicina

ğŸ—ï¸ ARQUITECTURA DE AGENTES:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PATIENTIA AGENT ARCHITECTURE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   STREAMLIT     â”‚    â”‚            LANGGRAPH ORCHESTRATOR              â”‚ â”‚
â”‚  â”‚   INTERFACE     â”‚â”€â”€â”€â”€â–¶                                                 â”‚ â”‚
â”‚  â”‚  (chat_llm.py)  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚ COORDINATOR â”‚  â”‚  UNIVERSAL DETECTOR     â”‚  â”‚ â”‚
â”‚                         â”‚  â”‚   AGENT     â”‚  â”‚ (Dataset Analysis)      â”‚  â”‚ â”‚
â”‚                         â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚                         â”‚        â”‚                                       â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚        â–¼                                       â”‚ â”‚
â”‚  â”‚   FAST          â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ ORCHESTRATOR    â”‚â—„â”€â”€â”€â”¤  â”‚            SPECIALIZED AGENTS           â”‚   â”‚ â”‚
â”‚  â”‚ (Fallback)      â”‚    â”‚  â”‚                                         â”‚   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚                         â”‚  â”‚ â”‚ANALYZER â”‚ â”‚GENERATORâ”‚ â”‚ VALIDATOR   â”‚ â”‚   â”‚ â”‚
â”‚                         â”‚  â”‚ â”‚ AGENT   â”‚ â”‚ AGENT   â”‚ â”‚   AGENT     â”‚ â”‚   â”‚ â”‚
â”‚                         â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚                         â”‚  â”‚                                         â”‚   â”‚ â”‚
â”‚                         â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚                         â”‚  â”‚ â”‚SIMULATORâ”‚ â”‚      EVALUATOR          â”‚ â”‚   â”‚ â”‚
â”‚                         â”‚  â”‚ â”‚ AGENT   â”‚ â”‚       AGENT             â”‚ â”‚   â”‚ â”‚
â”‚                         â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚                         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¯ FLUJO PRINCIPAL DEL SISTEMA:

1. CARGA DE DATOS
   â””â”€ Usuario sube dataset mÃ©dico (CSV) via Streamlit
   â””â”€ Sistema detecta automÃ¡ticamente tipo de dataset (COVID-19, diabetes, etc.)

2. ANÃLISIS INTELIGENTE
   â””â”€ UniversalDatasetDetector mapea columnas automÃ¡ticamente
   â””â”€ ClinicalAnalyzerAgent genera informe mÃ©dico detallado

3. GENERACIÃ“N SINTÃ‰TICA
   â””â”€ Usuario selecciona modelo (CTGAN/TVAE/SDV) y parÃ¡metros
   â””â”€ GeneratorAgent crea datos sintÃ©ticos preservando patrones

4. VALIDACIÃ“N MÃ‰DICA
   â””â”€ ValidatorAgent verifica coherencia clÃ­nica y estructura
   â””â”€ Detecta inconsistencias mÃ©dicas automÃ¡ticamente

5. SIMULACIÃ“N CLÃNICA
   â””â”€ SimulatorAgent modela evoluciÃ³n temporal de pacientes
   â””â”€ Genera historias clÃ­nicas con mÃºltiples visitas

6. EVALUACIÃ“N DE CALIDAD
   â””â”€ EvaluatorAgent calcula mÃ©tricas de fidelidad y utilidad
   â””â”€ Genera informe de calidad para uso en investigaciÃ³n

7. SIMULACIÃ“N TEMPORAL EVOLUCIÃ“N PACIENTES
   â””â”€ SimulatorAgent Simula la evoluciÃ³n de pacientes
   â””â”€ Genera informe de evoluciÃ³n de pacientes segun patologÃ­a

ğŸ“ ESTRUCTURA DETALLADA DEL PROYECTO
================================================================================

R35_sopra_steria/
â”œâ”€â”€ ğŸ“ data/                           # Datasets mÃ©dicos
â”‚   â”œâ”€â”€ real/                          # Datos originales procesados
â”‚   â”‚   â”œâ”€â”€ cardiology_fict_data.csv
â”‚   â”‚   â”œâ”€â”€ df_final_v2.csv
â”‚   â”‚   â”œâ”€â”€ diabetes.csv
â”‚   â”‚   â””â”€â”€ filtered_covid_dataset.csv
â”‚   â””â”€â”€ synthetic/                     # Cohortes sintÃ©ticas generadas
â”‚       â”œâ”€â”€ datos_sinteticos_ctgan.csv
â”‚       â”œâ”€â”€ datos_sinteticos_tvae.csv
â”‚       â””â”€â”€ metadata_*.json
â”‚
â”œâ”€â”€ ğŸ“ interfaces/                     # Interfaces de usuario
â”‚   â”œâ”€â”€ chat_llm.py                   # â­ Interfaz principal Streamlit
â”‚   â”œâ”€â”€ chat_llm_langgraph.py         # Interfaz LangGraph especializada
â”‚   â””â”€â”€ chat_llm_unified.py           # Interfaz unificada (backup)
â”‚
â”œâ”€â”€ ğŸ“ src/                           # CÃ³digo fuente principal
â”‚   â”œâ”€â”€ ğŸ“ agents/                    # â­ Sistema de agentes especializados
â”‚   â”‚   â”œâ”€â”€ base_agent.py             # Clase base para todos los agentes
â”‚   â”‚   â”œâ”€â”€ coordinator_agent.py      # â­ Coordinador principal
â”‚   â”‚   â”œâ”€â”€ analyzer_agent.py         # â­ AnÃ¡lisis clÃ­nico
â”‚   â”‚   â”œâ”€â”€ generator_agent.py        # â­ GeneraciÃ³n sintÃ©tica
â”‚   â”‚   â”œâ”€â”€ validator_agent.py        # â­ ValidaciÃ³n mÃ©dica
â”‚   â”‚   â”œâ”€â”€ simulator_agent.py        # â­ SimulaciÃ³n temporal
â”‚   â”‚   â””â”€â”€ evaluator_agent.py        # â­ EvaluaciÃ³n de calidad
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ orchestration/             # â­ OrquestaciÃ³n de workflows
â”‚   â”‚   â”œâ”€â”€ langgraph_orchestrator.py # â­ Orquestador principal LangGraph
â”‚   â”‚   â”œâ”€â”€ fast_orchestrator.py      # Orquestador optimizado (fallback)
â”‚   â”‚   â””â”€â”€ simple_orchestrator.py    # Orquestador bÃ¡sico
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ adapters/                  # Adaptadores de datos
â”‚   â”‚   â”œâ”€â”€ universal_dataset_detector.py  # â­ DetecciÃ³n automÃ¡tica
â”‚   â”‚   â”œâ”€â”€ medical_data_adapter.py   # Adaptador datos mÃ©dicos
â”‚   â”‚   â””â”€â”€ medical_column_selector.py # Selector de columnas
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ generation/                # â­ Modelos generativos
â”‚   â”‚   â”œâ”€â”€ ctgan_generator.py        # Generador CTGAN
â”‚   â”‚   â”œâ”€â”€ tvae_generator.py         # Generador TVAE
â”‚   â”‚   â””â”€â”€ sdv_generator.py          # Generador SDV
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ validation/                # ValidaciÃ³n clÃ­nica
â”‚   â”‚   â”œâ”€â”€ medical_validator.py      # Validador mÃ©dico
â”‚   â”‚   â””â”€â”€ schema_validator.py       # Validador de esquemas
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ evaluation/                # â­ EvaluaciÃ³n de calidad
â”‚   â”‚   â””â”€â”€ evaluator.py              # MÃ©tricas ML y entidades mÃ©dicas
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ simulation/                # SimulaciÃ³n clÃ­nica
â”‚   â”‚   â””â”€â”€ clinical_simulator.py     # Simulador de evoluciÃ³n
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ config/                    # ConfiguraciÃ³n del sistema
â”‚   â”‚   â”œâ”€â”€ llm_config.py             # â­ ConfiguraciÃ³n LLMs
â”‚   â”‚   â””â”€â”€ pipeline_config.py        # â­ ConfiguraciÃ³n dinÃ¡mica
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ utils/                     # Utilidades auxiliares
â”‚       â”œâ”€â”€ streamlit_async_wrapper.py # Wrapper para Streamlit+async
â”‚       â””â”€â”€ [otras utilidades]
â”‚
â”œâ”€â”€ ğŸ“ tests/                         # Pruebas del sistema
â”‚   â”œâ”€â”€ test_dependencies.py          # VerificaciÃ³n dependencias
â”‚   â”œâ”€â”€ test_phase_1_2.py            # Tests validaciÃ³n arquitectura
â”‚   â”œâ”€â”€ test_integration_flow.py      # Tests integraciÃ³n completa
â”‚   â””â”€â”€ [otros tests]
â”‚
â”œâ”€â”€ ğŸ“ notebooks/                     # AnÃ¡lisis exploratorio
â”‚   â”œâ”€â”€ EDA.ipynb                     # AnÃ¡lisis exploratorio
â”‚   â”œâ”€â”€ FAISS.ipynb                   # BÃºsqueda similitud
â”‚   â””â”€â”€ umap_hdbscan_faiss.ipynb     # Clustering avanzado
â”‚
â”œâ”€â”€ ğŸ“ docs/                          # DocumentaciÃ³n mÃ©dica
â”œâ”€â”€ ğŸ“ outputs/                       # Salidas generadas
â”œâ”€â”€ ğŸ”§ .env                           # â­ Variables de entorno
â”œâ”€â”€ ğŸ”§ Pipfile                        # Dependencias Pipenv
â”œâ”€â”€ ğŸ”§ requirements.txt               # Dependencias pip
â””â”€â”€ ğŸ“– README.md                      # DocumentaciÃ³n usuario

â­ = Archivos crÃ­ticos para funcionamiento

ğŸ”§ CONFIGURACIÃ“N E INSTALACIÃ“N
================================================================================

ğŸ“‹ REQUISITOS DEL SISTEMA:
- Python 3.11 o superior
- Sistema Operativo: Windows, macOS, Linux
- Memoria RAM: MÃ­nimo 8GB (16GB+ recomendado)
- Espacio en disco: 2GB para instalaciÃ³n completa
- API Key: Groq/Azure OpenAI/Ollama (para funcionalidades LLM)

ğŸš€ INSTALACIÃ“N RÃPIDA:

# OpciÃ³n 1: Pipenv (recomendado)
git clone https://github.com/username/R35_sopra_steria.git
cd R35_sopra_steria
pipenv install
pipenv shell

# OpciÃ³n 2: pip
git clone https://github.com/username/R35_sopra_steria.git
cd R35_sopra_steria
python -m venv venv
venv\Scripts\activate    # Windows
source venv/bin/activate # macOS/Linux
pip install -r requirements.txt

âš™ï¸ CONFIGURACIÃ“N DE VARIABLES DE ENTORNO (.env):

# ConfiguraciÃ³n LLM (elegir una opciÃ³n)

# OPCIÃ“N 1: Groq (recomendado - mÃ¡s rÃ¡pido)
GROQ_API_KEY="tu_api_key_aqui"
GROQ_MODEL="meta-llama/llama-4-scout-17b-16e-instruct"
FORCE_GROQ=true

# OPCIÃ“N 2: Azure OpenAI
AZURE_OPENAI_API_KEY="tu_api_key_aqui"
AZURE_OPENAI_ENDPOINT="https://tu-resource.openai.azure.com/"
AZURE_OPENAI_DEPLOYMENT="tu_deployment"
AZURE_OPENAI_API_VERSION="2024-02-01"

# OPCIÃ“N 3: Ollama Local
OLLAMA_MODEL="medllama2:latest"
OLLAMA_BASE_URL="http://localhost:11434"

ğŸƒ EJECUCIÃ“N DEL SISTEMA:

# Iniciar aplicaciÃ³n principal
streamlit run interfaces/chat_llm.py

# Acceder en navegador
http://localhost:8501

# AnÃ¡lisis con notebooks
jupyter lab

ğŸ¤– GUÃA DE AGENTES ESPECIALIZADOS
================================================================================

ğŸ¯ 1. COORDINATOR AGENT (coordinator_agent.py)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PROPÃ“SITO: Punto de entrada principal, asistente mÃ©dico conversacional
CAPACIDADES:
  âœ… Mantiene conversaciones mÃ©dicas naturales
  âœ… Identifica intenciones del usuario (conversaciÃ³n vs comando)
  âœ… Orquesta delegaciÃ³n a agentes especializados
  âœ… Extrae parÃ¡metros de comandos (modelo, num_samples, etc.)

PROMPTS ESPECIALIZADOS:
- Experto en IA mÃ©dica conversacional
- Diferencia entre chat casual y comandos de tarea
- Extraer parÃ¡metros de generaciÃ³n automÃ¡ticamente

EJEMPLO DE USO:
User: "Â¡Hola! Â¿CÃ³mo estÃ¡s?"
Response: {'intention': 'conversacion', 'message': 'Â¡Hola! Soy tu asistente...'}

User: "Analiza los datos de COVID-19"
Response: {'intention': 'comando', 'agent': 'analyzer'}

User: "Genera 200 muestras con CTGAN"
Response: {'intention': 'comando', 'agent': 'generator', 
          'parameters': {'num_samples': 200, 'model_type': 'ctgan'}}

ğŸ“Š 2. ANALYZER AGENT (analyzer_agent.py)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PROPÃ“SITO: AnÃ¡lisis clÃ­nico profundo de datasets mÃ©dicos
CAPACIDADES:
  âœ… AnÃ¡lisis estadÃ­stico de variables mÃ©dicas
  âœ… IdentificaciÃ³n de patrones clÃ­nicos especÃ­ficos
  âœ… DetecciÃ³n de correlaciones mÃ©dicamente relevantes
  âœ… GeneraciÃ³n de informes clÃ­nicos detallados

ESPECIALIZACIÃ“N POR DOMINIO:
- COVID-19: AnÃ¡lisis sÃ­ntomas, severidad, comorbilidades
- Diabetes: AnÃ¡lisis glucosa, HbA1c, complicaciones
- CardiologÃ­a: AnÃ¡lisis factores riesgo cardiovascular
- GenÃ©rico: AnÃ¡lisis exploratorio adaptativo

MÃ‰TRICAS GENERADAS:
- Distribuciones de edad, gÃ©nero, diagnÃ³sticos
- Correlaciones entre variables clÃ­nicas
- IdentificaciÃ³n de outliers mÃ©dicos
- Resumen de patrones temporales

EJEMPLO DE SALIDA:
```
ğŸ“‹ ANÃLISIS CLÃNICO DETALLADO - DATASET COVID-19

## ğŸ“Š CARACTERÃSTICAS DEMOGRÃFICAS
- **Total pacientes**: 1,000
- **Edad promedio**: 67.5 aÃ±os (rango: 18-95)
- **DistribuciÃ³n gÃ©nero**: 52% mujeres, 48% hombres

## ğŸ¦  ANÃLISIS ESPECÃFICO COVID-19
- **Severidad casos**: 65% leves, 25% moderados, 10% severos
- **SÃ­ntomas mÃ¡s frecuentes**: Fiebre (89%), tos (76%), fatiga (71%)
- **Comorbilidades principales**: HipertensiÃ³n (34%), diabetes (28%)

## ğŸ” CORRELACIONES CLÃNICAS RELEVANTES
- Edad avanzada correlaciona con mayor severidad (r=0.68)
- Comorbilidades aumentan riesgo hospitalizaciÃ³n (OR=2.4)
```

ğŸ§¬ 3. GENERATOR AGENT (generator_agent.py)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PROPÃ“SITO: GeneraciÃ³n de datos sintÃ©ticos mÃ©dicos de alta calidad
CAPACIDADES:
  âœ… Soporte mÃºltiples modelos: CTGAN, TVAE, SDV
  âœ… PreservaciÃ³n de correlaciones mÃ©dicas complejas
  âœ… GeneraciÃ³n adaptativa por tipo de dataset
  âœ… Control de parÃ¡metros de generaciÃ³n

MODELOS DISPONIBLES:

ğŸ”¸ CTGAN (Conditional Tabular GAN):
- Mejor para: Datos con muchas correlaciones complejas
- Ventaja: Preserva relaciones no-lineales
- Tiempo: Entrenamiento lento, generaciÃ³n rÃ¡pida
- Uso recomendado: Datasets grandes (>1000 filas)

ğŸ”¸ TVAE (Tabular Variational AutoEncoder):
- Mejor para: Datos con distribuciones complejas
- Ventaja: Estable, reproduce distribuciones fielmente
- Tiempo: Entrenamiento moderado
- Uso recomendado: Datos con muchas variables numÃ©ricas

ğŸ”¸ SDV (Gaussian Copula):
- Mejor para: GeneraciÃ³n rÃ¡pida, datasets pequeÃ±os
- Ventaja: RÃ¡pido, fÃ¡cil de interpretar
- Tiempo: Muy rÃ¡pido entrenamiento y generaciÃ³n
- Uso recomendado: Prototipado, datasets <500 filas

SELECCIÃ“N AUTOMÃTICA DE COLUMNAS:
- COVID-19: 10 columnas mÃ¡s relevantes (optimizaciÃ³n)
- Otros datasets: Todas las columnas disponibles
- Filtrado inteligente: Elimina IDs, columnas vacÃ­as

EJEMPLO DE USO:
```python
# GeneraciÃ³n estÃ¡ndar
result = generator_agent.generate_synthetic_data(
    real_data=df_covid,
    model_type="ctgan",
    num_samples=500,
    context={"dataset_type": "COVID-19"}
)

# Resultado incluye:
# - DataFrame sintÃ©tico
# - Metadatos de generaciÃ³n
# - MÃ©tricas de calidad bÃ¡sicas
```

âœ… 4. VALIDATOR AGENT (validator_agent.py)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PROPÃ“SITO: ValidaciÃ³n de coherencia mÃ©dica y estructural
CAPACIDADES:
  âœ… ValidaciÃ³n datos tabulares (pandas DataFrame)
  âœ… ValidaciÃ³n datos JSON sintÃ©ticos
  âœ… VerificaciÃ³n reglas mÃ©dicas especÃ­ficas
  âœ… DetecciÃ³n inconsistencias automÃ¡tica

TIPOS DE VALIDACIÃ“N:

ğŸ”¸ ValidaciÃ³n Estructural:
- Tipos de datos correctos
- Rangos de valores apropiados
- Completitud de columnas obligatorias
- Consistencia interna del dataset

ğŸ”¸ ValidaciÃ³n MÃ©dica:
- Coherencia edad-diagnÃ³stico
- Compatibilidad medicamentos-enfermedades
- Rangos clÃ­nicos apropiados (signos vitales)
- LÃ³gica temporal de tratamientos

ğŸ”¸ ValidaciÃ³n EspecÃ­fica por Dominio:
- COVID-19: SÃ­ntomas compatibles, evoluciÃ³n lÃ³gica
- Diabetes: Valores glucosa coherentes, medicaciÃ³n apropiada
- CardiologÃ­a: Factores riesgo alineados

MÃ‰TRICAS DE VALIDACIÃ“N:
- Score de coherencia clÃ­nica (0-100%)
- Ãndice de completitud estructural
- NÃºmero de inconsistencias detectadas
- Recomendaciones de mejora

EJEMPLO DE SALIDA:
```
âœ… VALIDACIÃ“N COMPLETADA

ğŸ“Š MÃ‰TRICAS DE VALIDACIÃ“N:
- Score coherencia clÃ­nica: 94.2%
- Completitud estructural: 98.7%
- Inconsistencias detectadas: 3

âš ï¸ INCONSISTENCIAS ENCONTRADAS:
1. Paciente ID_245: Edad 25 aÃ±os con diagnÃ³stico "Insuficiencia cardÃ­aca"
2. Paciente ID_789: MedicaciÃ³n "Insulina" sin diagnÃ³stico diabetes
3. Registro ID_123: PresiÃ³n arterial fuera de rango (300/150)

ğŸ’¡ RECOMENDACIONES:
- Revisar diagnÃ³sticos en poblaciÃ³n joven
- Verificar coherencia medicaciÃ³n-diagnÃ³stico
- Validar rangos de signos vitales
```

â±ï¸ 5. SIMULATOR AGENT (simulator_agent.py)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PROPÃ“SITO: SimulaciÃ³n de evoluciÃ³n temporal de casos clÃ­nicos
CAPACIDADES:
  âœ… SimulaciÃ³n progresiÃ³n de enfermedades
  âœ… GeneraciÃ³n de mÃºltiples visitas mÃ©dicas
  âœ… Modelado de respuesta a tratamientos
  âœ… EvoluciÃ³n realista de parÃ¡metros clÃ­nicos

TIPOS DE SIMULACIÃ“N:

ğŸ”¸ SimulaciÃ³n COVID-19:
- ProgresiÃ³n sÃ­ntomas por fases
- EvoluciÃ³n severidad (leve â†’ moderado â†’ severo)
- Respuesta a tratamientos especÃ­ficos
- Modelado de recuperaciÃ³n/complicaciones

ğŸ”¸ SimulaciÃ³n Diabetes:
- Control glucÃ©mico a lo largo del tiempo
- Ajustes de medicaciÃ³n
- Desarrollo de complicaciones
- Seguimiento HbA1c trimestral

ğŸ”¸ SimulaciÃ³n GenÃ©rica:
- EvoluciÃ³n adaptativa basada en diagnÃ³stico
- ProgresiÃ³n lÃ³gica de parÃ¡metros
- Respuesta a intervenciones

PARÃMETROS SIMULADOS:
- Signos vitales (temperatura, presiÃ³n, saturaciÃ³n)
- Valores laboratorio (glucosa, marcadores)
- SÃ­ntomas y su intensidad
- MedicaciÃ³n y dosificaciÃ³n
- Estado general del paciente

EJEMPLO DE HISTORIA SIMULADA:
```json
{
  "patient_id": "SIM_001",
  "initial_diagnosis": "COVID-19 leve",
  "visits": [
    {
      "day": 0,
      "symptoms": ["fiebre_leve", "tos_seca"],
      "vitals": {"temp": 38.2, "o2_sat": 97},
      "treatment": ["paracetamol", "reposo"]
    },
    {
      "day": 5,
      "symptoms": ["fiebre_persistente", "fatiga"],
      "vitals": {"temp": 38.8, "o2_sat": 94},
      "treatment": ["paracetamol", "antivirales"]
    },
    {
      "day": 14,
      "symptoms": ["fatiga_leve"],
      "vitals": {"temp": 37.1, "o2_sat": 98},
      "status": "recuperaciÃ³n"
    }
  ]
}
```

ğŸ“ˆ 6. EVALUATOR AGENT (evaluator_agent.py)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PROPÃ“SITO: EvaluaciÃ³n exhaustiva de calidad de datos sintÃ©ticos
CAPACIDADES:
  âœ… MÃ©tricas de fidelidad estadÃ­stica
  âœ… EvaluaciÃ³n utilidad para Machine Learning
  âœ… AnÃ¡lisis preservaciÃ³n de correlaciones
  âœ… Score de privacidad y anonimizaciÃ³n

MÃ‰TRICAS EVALUADAS:

ğŸ”¸ Fidelidad EstadÃ­stica (Peso: 50%):
- PreservaciÃ³n de correlaciones (25%)
- Similaridad de distribuciones (25%)
- Cobertura de valores Ãºnicos (5%)

ğŸ”¸ Utilidad para ML (Peso: 20%):
- PreservaciÃ³n F1-Score en modelos entrenados
- PreservaciÃ³n Accuracy en tareas clasificaciÃ³n
- Performance en validaciÃ³n cruzada

ğŸ”¸ Entidades MÃ©dicas (Peso: 15%):
- F1-Score extracciÃ³n entidades mÃ©dicas
- Calidad terminologÃ­a mÃ©dica preservada
- Coherencia conceptos clÃ­nicos

ğŸ”¸ Privacidad (Peso: 10%):
- Score no-replicaciÃ³n registros originales
- AnonimizaciÃ³n efectiva de datos sensibles
- Resistencia a ataques de re-identificaciÃ³n

CLASIFICACIÃ“N DE CALIDAD:
- ğŸŸ¢ Excelente (90-100%): ProducciÃ³n, estudios crÃ­ticos
- ğŸ”µ Muy Bueno (80-89%): InvestigaciÃ³n avanzada, aplicaciones ML
- ğŸŸ¡ Bueno (70-79%): Estudios exploratorios, desarrollo
- ğŸŸ  Aceptable (60-69%): Prototipado, pruebas concepto
- ğŸ”´ Limitado (<60%): Requiere mejoras significativas

EJEMPLO DE INFORME:
```
ğŸ“Š EVALUACIÃ“N DE CALIDAD - DATOS SINTÃ‰TICOS COVID-19

## ğŸ¯ RESUMEN EJECUTIVO
- **Score Final**: 87.3% (Muy Bueno)
- **RecomendaciÃ³n**: Apto para investigaciÃ³n avanzada y aplicaciones ML
- **Nivel de Confianza**: Alto

## ğŸ“ˆ MÃ‰TRICAS DETALLADAS
### Fidelidad EstadÃ­stica: 89.1%
- PreservaciÃ³n correlaciones: 91.2%
- Similaridad distribuciones: 87.5%
- Cobertura valores Ãºnicos: 88.7%

### Utilidad Machine Learning: 84.6%
- PreservaciÃ³n F1-Score: 88.2%
- PreservaciÃ³n Accuracy: 81.0%

### Entidades MÃ©dicas: 79.4%
- F1-Score extracciÃ³n: 82.1%
- Calidad terminologÃ­a: Buena

### Privacidad: 94.8%
- No-replicaciÃ³n registros: 97.2%
- AnonimizaciÃ³n efectiva: 92.4%

## ğŸ’¡ RECOMENDACIONES
âœ… Excelente para estudios observacionales
âœ… Apropiado para entrenamiento modelos predictivos
âš ï¸ Considerar validaciÃ³n adicional para estudios clÃ­nicos crÃ­ticos
```

ğŸ”„ FLUJOS DE TRABAJO (WORKFLOWS)
================================================================================

El sistema implementa 5 workflows especializados orquestados por LangGraph:

ğŸ“‹ 1. ANALYZER WORKFLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TRIGGER: Usuario solicita "analizar datos", "anÃ¡lisis clÃ­nico"
PASOS:
1. Universal Dataset Detector â†’ DetecciÃ³n automÃ¡tica tipo dataset
2. Dynamic Pipeline Config â†’ ConfiguraciÃ³n anÃ¡lisis especÃ­fico
3. Clinical Analyzer Agent â†’ AnÃ¡lisis clÃ­nico profundo con LLM
4. GeneraciÃ³n informe mÃ©dico detallado

ENTRADA: DataFrame mÃ©dico cargado
SALIDA: Informe clÃ­nico en Markdown + metadatos anÃ¡lisis

ğŸ§¬ 2. GENERATOR WORKFLOW  
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TRIGGER: Usuario solicita "generar datos", "crear sintÃ©ticos"
PASOS:
1. ExtracciÃ³n parÃ¡metros (modelo, num_samples) del comando usuario
2. SelecciÃ³n columnas relevantes (automÃ¡tica por tipo dataset)
3. GeneraciÃ³n con modelo seleccionado (CTGAN/TVAE/SDV)
4. Post-procesamiento y packaging resultado

ENTRADA: DataFrame real + parÃ¡metros generaciÃ³n
SALIDA: DataFrame sintÃ©tico + metadatos generaciÃ³n

âœ… 3. VALIDATOR WORKFLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TRIGGER: Usuario solicita "validar datos", "verificar coherencia"
PASOS:
1. DetecciÃ³n tipo de datos (tabular DataFrame vs JSON sintÃ©tico)
2. AplicaciÃ³n reglas validaciÃ³n especÃ­ficas por tipo
3. VerificaciÃ³n coherencia mÃ©dica especializada
4. GeneraciÃ³n report validaciÃ³n con inconsistencias

ENTRADA: Datos a validar (cualquier formato)
SALIDA: Informe validaciÃ³n + score coherencia + recomendaciones

ğŸ“Š 4. EVALUATOR WORKFLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TRIGGER: Usuario solicita "evaluar calidad", "mÃ©tricas datos"
PASOS:
1. CÃ¡lculo mÃ©tricas fidelidad estadÃ­stica
2. EvaluaciÃ³n utilidad para Machine Learning
3. AnÃ¡lisis entidades mÃ©dicas preservadas
4. CÃ¡lculo score privacidad y clasificaciÃ³n final

ENTRADA: Datos originales + datos sintÃ©ticos
SALIDA: Informe evaluaciÃ³n completo + score calidad

â±ï¸ 5. SIMULATOR WORKFLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TRIGGER: Usuario solicita "simular evoluciÃ³n", "generar historias"
PASOS:
1. SelecciÃ³n pacientes para simulaciÃ³n
2. DefiniciÃ³n parÃ¡metros evoluciÃ³n por tipo enfermedad
3. SimulaciÃ³n progresiÃ³n temporal con mÃºltiples visitas
4. GeneraciÃ³n historias clÃ­nicas completas

ENTRADA: Datos base pacientes + parÃ¡metros simulaciÃ³n
SALIDA: Historias clÃ­nicas con evoluciÃ³n temporal


ğŸ”§ CONFIGURACIÃ“N Y PERSONALIZACIÃ“N
================================================================================

âš™ï¸ CONFIGURACIÃ“N LLM (src/config/llm_config.py):

El sistema soporta mÃºltiples proveedores LLM con fallback automÃ¡tico:

```python
# JerarquÃ­a de proveedores (orden prioridad)
1. Groq (mÃ¡s rÃ¡pido) - RECOMENDADO
2. Azure OpenAI (mÃ¡s potente)
3. Ollama (local, privacidad total)

# ConfiguraciÃ³n automÃ¡tica basada en variables .env
# El sistema detecta automÃ¡ticamente quÃ© proveedor usar
```

ğŸ”§ CONFIGURACIÃ“N DINÃMICA (src/config/pipeline_config.py):

Perfiles especializados por tipo de dataset:

```python
# COVID-19 Profile
covid_config = {
    'analysis_focus': ['symptoms', 'severity', 'comorbidities'],
    'key_columns': ['age', 'gender', 'diagnosis', 'symptoms'],
    'validation_rules': ['covid_symptom_coherence', 'age_severity_correlation'],
    'simulation_parameters': {'progression_days': 21, 'recovery_rate': 0.85}
}

# Diabetes Profile  
diabetes_config = {
    'analysis_focus': ['glucose_control', 'complications', 'medication'],
    'key_columns': ['age', 'glucose', 'hba1c', 'insulin'],
    'validation_rules': ['glucose_range_validation', 'medication_coherence'],
    'simulation_parameters': {'follow_up_months': 12, 'control_target': 7.0}
}

# Generic Medical Profile
generic_config = {
    'analysis_focus': ['demographics', 'diagnoses', 'treatments'],
    'key_columns': ['auto_detected'],
    'validation_rules': ['basic_medical_coherence'],
    'simulation_parameters': {'adaptive_evolution': True}
}
```

ğŸ›ï¸ PARÃMETROS DE GENERACIÃ“N SINTÃ‰TICA:

```python
# CTGAN Parameters
ctgan_params = {
    'epochs': 300,              # Entrenamiento mÃ¡s profundo
    'batch_size': 500,          # Optimizado para datasets mÃ©dicos
    'generator_lr': 2e-4,       # Learning rate generador
    'discriminator_lr': 2e-4,   # Learning rate discriminador
    'pac': 10                   # Packing factor
}

# TVAE Parameters
tvae_params = {
    'epochs': 300,
    'batch_size': 500,
    'compress_dims': (128, 128), # Arquitectura encoder
    'decompress_dims': (128, 128) # Arquitectura decoder
}

# SDV Parameters (Gaussian Copula)
sdv_params = {
    'numerical_distributions': {'gaussian': ['age', 'glucose']},
    'categorical_fuzzy': True,   # Manejo categorÃ­as complejas
    'default_distribution': 'gaussian_kde'
}
```

ğŸ“Š MÃ‰TRICAS Y EVALUACIÃ“N AVANZADA
================================================================================

El sistema implementa un framework completo de evaluaciÃ³n con mÃºltiples mÃ©tricas:

ğŸ” MÃ‰TRICAS ESTADÃSTICAS:

```python
# Fidelidad Distribucional
- Jensen-Shannon Divergence: Similaridad distribuciones
- Kolmogorov-Smirnov Test: Distribuciones por variable
- Chi-Square Test: Variables categÃ³ricas
- Correlation Matrix Distance: PreservaciÃ³n correlaciones

# Diversidad y Cobertura
- Unique Value Coverage: % valores Ãºnicos preservados
- Range Coverage: Cobertura rangos numÃ©ricos
- Category Coverage: Cobertura categorÃ­as discretas
- Outlier Preservation: Mantenimiento valores extremos
```

ğŸ¤– MÃ‰TRICAS MACHINE LEARNING:

```python
# Utilidad Predictiva
- F1-Score Preservation: ComparaciÃ³n modelos real vs sintÃ©tico
- Accuracy Preservation: PrecisiÃ³n clasificaciÃ³n preservada
- AUC-ROC Preservation: Capacidad discriminatoria
- Feature Importance Similarity: Importancia variables

# Modelos de EvaluaciÃ³n EstÃ¡ndar
- RandomForestClassifier: ClasificaciÃ³n general
- LogisticRegression: ClasificaciÃ³n lineal
- XGBoost: ClasificaciÃ³n ensemble
- SVM: ClasificaciÃ³n kernel
```

ğŸ¥ MÃ‰TRICAS MÃ‰DICAS ESPECIALIZADAS:

```python
# Entidades MÃ©dicas (NER - Named Entity Recognition)
- Medical Entity F1: ExtracciÃ³n terminologÃ­a mÃ©dica
- Drug-Disease Coherence: Coherencia medicamentos-enfermedades
- ICD-10 Code Validation: ValidaciÃ³n cÃ³digos diagnÃ³stico
- Temporal Logic Consistency: Coherencia evoluciÃ³n temporal

# MÃ©tricas ClÃ­nicas EspecÃ­ficas
- Age-Diagnosis Correlation: Coherencia edad-diagnÃ³stico
- Comorbidity Patterns: Patrones comorbilidades preservados
- Treatment Pathways: Rutas tratamiento lÃ³gicas
- Outcome Distributions: Distribuciones resultados clÃ­nicos
```

ğŸ” MÃ‰TRICAS DE PRIVACIDAD:

```python
# Riesgo Re-identificaciÃ³n
- k-Anonymity Score: AnonimizaciÃ³n k-anÃ³nima
- l-Diversity Index: Diversidad valores sensibles
- t-Closeness Measure: CercanÃ­a distribucional
- Differential Privacy Budget: Presupuesto privacidad

# AnÃ¡lisis MembresÃ­a
- Membership Inference Attack: Resistencia ataques membresÃ­a
- Attribute Inference Risk: Riesgo inferencia atributos
- Record Linkage Vulnerability: Vulnerabilidad linkage
- Identity Disclosure Risk: Riesgo revelaciÃ³n identidad
```

ğŸš¨ SOLUCIÃ“N DE PROBLEMAS Y DEBUGGING
================================================================================

ğŸ› PROBLEMAS COMUNES Y SOLUCIONES:

ğŸ”´ Error: "Dataset muy pequeÃ±o para generaciÃ³n"
```
CAUSA: Dataset <50 filas
SOLUCIÃ“N: 
- Combinar mÃºltiples datasets similares
- Usar parÃ¡metros generaciÃ³n mÃ¡s conservadores
- Considerar aumentar datos con tÃ©cnicas estadÃ­sticas
```

ğŸ”´ Error: "No se detectaron suficientes columnas mÃ©dicas"
```
CAUSA: Columnas mal nombradas o falta informaciÃ³n mÃ©dica
SOLUCIÃ“N:
- Renombrar columnas siguiendo convenciones: 'age', 'gender', 'diagnosis'
- Agregar columnas obligatorias faltantes
- Verificar que hay al menos 2 columnas numÃ©ricas
```

ğŸ”´ Error: "LangGraph workflow initialization failed"
```
CAUSA: Problemas importaciÃ³n LangGraph o configuraciÃ³n agentes
SOLUCIÃ“N:
- Verificar instalaciÃ³n: pip install langgraph
- Usar FastOrchestrator como fallback
- Revisar configuraciÃ³n .env para API keys
```

ğŸ”´ Error: "Event loop is closed" en Streamlit
```
CAUSA: Conflicto async/sync entre Streamlit y LangGraph
SOLUCIÃ“N:
- Sistema usa StreamlitAsyncWrapper automÃ¡ticamente
- Reiniciar aplicaciÃ³n si persiste
- Usar modo Simple Orchestrator temporal
```

ğŸ”´ Error: "Synthetic data generation failed"
```
CAUSA: Problemas modelo generativo o datos entrada
SOLUCIÃ“N:
- Probar modelo diferente (CTGAN â†’ TVAE â†’ SDV)
- Reducir nÃºmero columnas seleccionadas
- Verificar calidad datos originales
- Revisar logs detallados en terminal
```

ğŸ“Š DEBUGGING Y MONITOREO:

```python
# Logs detallados disponibles
- Dataset detection: universal_dataset_detector.py
- Agent execution: [agent_name].py
- Generation process: [generator_name].py
- Validation results: validator_agent.py
- Quality metrics: evaluator_agent.py

# Activar modo debug
DEBUG_MODE = True  # En .env para logs verbosos
```

ğŸ” HERRAMIENTAS DE DIAGNÃ“STICO:

```bash
# Verificar dependencias
python tests/test_dependencies.py

# Test integraciÃ³n completa
python tests/test_integration_flow.py

# Verificar configuraciÃ³n LLM
python tests/test_azure_basic.py

# Test agentes individuales
python tests/test_agent_flows.py
```

ğŸ“ˆ EXTENSIBILIDAD Y DESARROLLO
================================================================================

ğŸ”§ AGREGAR NUEVOS TIPOS DE DATASET:

```python
# 1. Extender UniversalDatasetDetector
def detect_cardiology_dataset(self, df):
    cardiology_keywords = [
        'ecg', 'cardiac', 'heart', 'cardiovascular',
        'coronary', 'arterial', 'myocardial'
    ]
    # Implementar lÃ³gica detecciÃ³n

# 2. Agregar configuraciÃ³n en pipeline_config.py
cardiology_config = {
    'analysis_focus': ['risk_factors', 'cardiac_markers', 'interventions'],
    'key_columns': ['age', 'cholesterol', 'blood_pressure', 'ecg_result'],
    'validation_rules': ['cardiac_risk_coherence', 'intervention_timing'],
    'simulation_parameters': {'progression_months': 24, 'risk_stratification': True}
}

# 3. Especializar prompts en analyzer_agent.py
cardiology_prompt = """
Eres un especialista en cardiologÃ­a analizando datos de pacientes cardiovasculares.
EnfÃ³cate en factores de riesgo, marcadores cardÃ­acos y patrones de intervenciÃ³n...
"""
```

ğŸ¯ CREAR NUEVOS AGENTES:

```python
# Estructura base para nuevo agente
from .base_agent import BaseLLMAgent, BaseAgentConfig

class CustomMedicalAgent(BaseLLMAgent):
    def __init__(self):
        config = BaseAgentConfig(
            name="Agente Personalizado",
            description="DescripciÃ³n funcionalidad especÃ­fica",
            system_prompt="Prompt especializado para tarea especÃ­fica"
        )
        super().__init__(config, tools=[])  # Definir herramientas si necesario
    
    async def process(self, input_text: str, context: Dict[str, Any] = None) -> Dict[str, Any]:
        # Implementar lÃ³gica especÃ­fica del agente
        # Usar self.agent_executor.ainvoke() para llamadas LLM
        pass
```

ğŸ”„ EXTENDER WORKFLOWS:

```python
# Agregar nuevo workflow en langgraph_orchestrator.py
def _create_custom_workflow(self):
    workflow = StateGraph(AgentState)
    
    # Definir nodos
    workflow.add_node("custom_node", self._custom_node)
    
    # Definir transiciones
    workflow.add_conditional_edges(
        "coordinator",
        self._route_from_coordinator,
        {"custom": "custom_node"}
    )
    
    return workflow.compile()
```

ğŸ“š RECURSOS Y REFERENCIAS
================================================================================

ğŸ“– DOCUMENTACIÃ“N TÃ‰CNICA:
- LangGraph: https://langchain-ai.github.io/langgraph/
- SDV (Synthetic Data Vault): https://docs.sdv.dev/
- CTGAN: https://github.com/sdv-dev/CTGAN
- Streamlit: https://docs.streamlit.io/

ğŸ“ REFERENCIAS ACADÃ‰MICAS:
- Xu, L., et al. "Modeling Tabular Data using Conditional GAN" (CTGAN)
- Patki, N., et al. "The Synthetic Data Vault" (SDV Framework)
- Medical Data Synthesis: https://physionet.org/about/
- MIMIC-IV Dataset: https://physionet.org/content/mimiciv/

ğŸ¥ ESTÃNDARES MÃ‰DICOS:
- ICD-10 Classification: https://icd.who.int/
- HL7 FHIR: https://www.hl7.org/fhir/
- Medical Terminology: SNOMED CT, UMLS

ğŸ’¼ CASOS DE USO EMPRESARIALES
================================================================================

ğŸ¥ SECTOR SALUD:
- Hospitales: Datos prueba sistemas HIS/EMR
- FarmacÃ©uticas: Datasets ensayos clÃ­nicos sintÃ©ticos
- Aseguradoras: Modelado riesgo sin datos sensibles
- InvestigaciÃ³n: Datos pÃºblicos para estudios colaborativos

ğŸ“ SECTOR ACADÃ‰MICO:
- Universidades: Datasets enseÃ±anza medicina/estadÃ­stica
- InvestigaciÃ³n: ValidaciÃ³n metodologÃ­as sin restricciones Ã©ticas
- Tesis/TFM: Datos proyecto sin problemas confidencialidad
- Competiciones: Datasets pÃºblicos hackathons mÃ©dicos

ğŸ¢ SECTOR TECNOLÃ“GICO:
- Startups HealthTech: Prototipado sin datos reales
- Consultoras: Demostraciones capacidades IA mÃ©dica
- Desarrolladores: Testing aplicaciones mÃ©dicas
- MLOps: Pipelines ML sin dependencia datos sensibles

ğŸ”® ROADMAP Y FUTURO DESARROLLO
================================================================================

ğŸ“… PRÃ“XIMAS FUNCIONALIDADES (Q3-Q4 2025):

ğŸ¯ FASE 3 - SIMULACIÃ“N AVANZADA:
- [ ] SimulaciÃ³n multi-paciente con interacciones
- [ ] Modelado epidemiolÃ³gico poblacional
- [ ] GeneraciÃ³n historias clÃ­nicas narrativas (texto libre)
- [ ] SimulaciÃ³n ensayos clÃ­nicos completos

ğŸ¯ FASE 4 - INTELIGENCIA AVANZADA:
- [ ] IntegraciÃ³n modelos fundacionales mÃ©dicos (BioGPT, ClinicalBERT)
- [ ] GeneraciÃ³n automÃ¡tica hipÃ³tesis clÃ­nicas
- [ ] ValidaciÃ³n con ontologÃ­as mÃ©dicas (UMLS, SNOMED)
- [ ] Sistema recomendaciÃ³n tratamientos sintÃ©ticos

ğŸ¯ FASE 5 - PRODUCCIÃ“N ENTERPRISE:
- [ ] API REST completa para integraciÃ³n sistemas
- [ ] Dashboard web administraciÃ³n cohortes
- [ ] Sistema autenticaciÃ³n y autorizaciÃ³n
- [ ] Monitoreo mÃ©tricas tiempo real
- [ ] Escalabilidad horizontal (Kubernetes)

ğŸŒŸ VISIÃ“N A LARGO PLAZO:
- Hospital Virtual Completo: Ecosistema sintÃ©tico completo
- IA MÃ©dica Conversacional: Asistente clÃ­nico avanzado
- Gemelos Digitales Pacientes: SimulaciÃ³n personalizada
- Plataforma SaaS Global: Servicio generaciÃ³n bajo demanda

ğŸ’¡ CONTRIBUCIÃ“N Y COMUNIDAD
================================================================================

ğŸ¤ CÃ“MO CONTRIBUIR:
- Fork del repositorio en GitHub
- Crear branch para feature/bugfix
- Seguir guÃ­as estilo cÃ³digo (PEP 8)
- Agregar tests para nuevas funcionalidades
- Documentar cambios en commit messages
- Pull request con descripciÃ³n detallada

ğŸ“§ CONTACTO Y SOPORTE:
- Issues GitHub: Para bugs y feature requests
- Discusiones: Para preguntas tÃ©cnicas y ideas
- Email: [contact@patientia.dev] (placeholder)

ğŸ“ COLABORACIÃ“N ACADÃ‰MICA:
- Citas proyecto: Disponible formato BibTeX
- Datos ejemplo: Datasets sintÃ©ticos pÃºblicos
- MetodologÃ­a: Papers y documentaciÃ³n tÃ©cnica
- Colaboraciones: Proyectos investigaciÃ³n conjunto

ğŸ“„ LICENCIA Y TÃ‰RMINOS
================================================================================

ğŸ“‹ LICENCIA: Especificada en archivo LICENSE del repositorio
ğŸ¢ DERECHOS: Copyright 2024-2025 Patientia - Sopra Steria TFM
âš–ï¸ USO: Consultar tÃ©rminos especÃ­ficos en documentaciÃ³n legal
ğŸ”’ PRIVACIDAD: No almacenamiento persistente datos reales
ğŸ›¡ï¸ SEGURIDAD: Medidas tÃ©cnicas protecciÃ³n datos sensibles

================================================================================
                                    FIN DOCUMENTACIÃ“N
                          Patientia R35 - Generador IA ClÃ­nico
                                Sopra Steria TFM 2024-2025
================================================================================

FECHA ACTUALIZACIÃ“N: Julio 2025
VERSIÃ“N DOCUMENTACIÃ“N: 1.0
ESTADO SISTEMA: Completamente funcional y operativo
NIVEL PRODUCCIÃ“N: Listo para implementaciÃ³n empresarial

Para mÃ¡s informaciÃ³n, consultar:
- README.md: GuÃ­a usuario final  
- /docs/: DocumentaciÃ³n adicional y guÃ­as especÃ­ficas
- /tests/: Ejemplos cÃ³digo y casos de uso
